
var questions = [ {
    "id": 1,
    "question": "Motorovým vozidlom sa rozumie",
    "answers": {
      "a": "koľajové a nekoľajové vozidlo poháňané vlastným motorom",
      "b": "nekoľajové vozidlo poháňané vlastným motorom s výnimkou mechanického alebo elektrického motorového vozíka pre zdravotne postihnuté osoby a trolejbus",
      "c": "vozidlo, ktoré má pridelené evidenčné číslo"
    },
    "correctAnswer": "b"
  },
  {
     "id": 2,
      "question": "Neohrozením sa rozumie povinnosť účastníka cestnej premávky",
      "answers": {
        "a": "neobchádzať ani nepredchádzať vozidlo prepravujúce nebezpečné veci a jazdiť za takýmto vozidlom vo vzdialenosti najmenej 50 m",
        "b": "počínať si tak, aby inému účastníkovi cestnej premávky nevzniklo nijaké nebezpečenstvo",
        "c": "počínať si tak, aby inému účastníkovi cestnej premávky nijako neprekážal"
      },
      "correctAnswer": "b"
    },
    {
      "id": 3,
      "question": "Vodič vozidla, ktoré je povinne vybavené prenosným výstražným trojuholníkom, je povinný tento trojuholník použiť počas",
      "answers": {
        "a": "prepravy nebezpečného nákladu",
        "b": "núdzového státia, ak také vozidlo tvorí prekážku cestnej premávky",
        "c": "núdzového státia vozidla za zníženej viditeľnosti"
      },
      "correctAnswer": "b"
    },
    {
        "id": 4,
        "question": "Vodič nesmie zastaviť a stáť vo vzdialenosti kratšej ako",
        "answers": {
          "a": "5 m od začiatku a 10 m od konca pozdĺžnej súvislej čiary alebo nástupného ostrovčeka",
          "b": "10 m od začiatku a 10 m od konca pozdĺžnej súvislej čiary alebo nástupného ostrovčeka",
          "c": "5 m od začiatku a 5 m od konca pozdĺžnej súvislej čiary alebo nástupného ostrovčeka tam, kde by medzi touto čiarou alebo nástupným ostrovčekom a vozidlom nezostal voľný aspoň jeden jazdný pruh široký najmenej 3 m"
        },
        "correctAnswer": "c"
      },
    {
      "id": 5,
      "question": "Predné svetlomety do hmly a zadné svietidlá do hmly vodič smie použiť",
      "answers": {
        "a": "len za hmly, sneženia alebo za dažďa",
        "b": "kedykoľvek za zníženej viditeľnosti",
        "c": "len za hmly; za sneženia a dažďa je povinný použiť diaľkové svetlomety"
      },
      "correctAnswer": "a"
    },
    {
        "id": 6,
        "question": "Vozovkou sa rozumie",
        "answers": {
          "a": "spevnená časť cesty určená predovšetkým na premávku motorových vozidiel,",
          "b": "časť cesty určená len na premávku nemotorových vozidiel",
          "c": "cesta, ktorá je určená na premávku motorových a nemotorových vozidiel, bicyklov, motoriek a mopedov."
        },
        "correctAnswer": "a"
      },
      {
        "id": 7,
        "question": " Motorové vozidlo musí mať počas jazdy rozsvietené",
        "answers": {
          "a": "svetlá vo vnútri vozidla",
          "b": "stretávacie svetlomety alebo im na roveň postavené osvetlenie",
          "c": "diaľkové svetlomety"
        },
        "correctAnswer": "b"
      },
      {
        "id": 8,
        "question": " Vodič nesmie viesť vozidlo",
        "answers": {
          "a": "po požití lieku v čase, keď liek môže znížiť jeho schopnosť viesť vozidlo; to neplatí, ak je jeho spolujazdcom lekár",
          "b": "po požití lieku v čase, keď liek môže znížiť jeho schopnosť viesť vozidlo",
          "c": "keď si zabudol vziať lieky, ktoré pravidelne užíva"
        },
        "correctAnswer": "b"
      },
      {
        "id": 9,
        "question": "Vodič nesmie pri predchádzaní ohroziť ani obmedziť vodičov vozidiel, pred ktoré sa po predídení zaraďuje; pritom je povinný dávať",
        "answers": {
          "a": "v obci zvukové alebo svetelné výstražné znamenie na upozornenie vodiča predchádzaného vozidla",
          "b": "znamenie o zmene smeru jazdy",
          "c": "znamenie o zmene smeru jazdy len za zníženej viditeľnosti"
        },
        "correctAnswer": "b"
      },
      {
        "id": 10,
        "question": "Znamenie o zmene smeru jazdy vodič je povinný dávať",
        "answers": {
          "a": "len pri zmene smeru jazdy; vodič, ktorý pri predchádzaní vybočuje zo smeru svojej jazdy, nie je povinný dávať znamenie o zmene smeru svojej jazdy",
          "b": "len pri predchádzaní iného vozidla",
          "c": "vždy aj pri zmene smeru jazdy alebo vybočovaní z neho alebo ak to vyžaduje bezpečnosť alebo plynulosť cestnej premávky"
        },
        "correctAnswer": "a"
      },
      {
        "id": 11,
        "question": "img/vlavo.png",
        "answers": {
          "a": "Zákruta vpravo",
          "b": "Zákruta vlavo",
          "c": "zakaz odbocenia"
        },
        "correctAnswer": "b"
      },
      {
        "id": 12,
        "question": "img/vpravo.png",
        "answers": {
          "a": "Zákruta vpravo",
          "b": "Zákruta vlavo",
          "c": "zakaz odbocenia"
        },
        "correctAnswer": "a"
      },
      {
        "id": 13,
        "question": "img/chodec.png",
        "answers": {
          "a": "prechod pre chodcov",
          "b": "muz na ceste",
          "c": "zena na ceste"
        },
        "correctAnswer": "a"
      },
      {
        "id": 14,
        "question": "img/hmla.png",
        "answers": {
          "a": "hmla",
          "b": "dazd",
          "c": "sneh"
        },
        "correctAnswer": "a"
      },
      {
        "id": 15,
        "question": "img/105.jpg",
        "answers": {
          "a": "modre, zelene a cervene",
          "b": "zelene, cervene a modre",
          "c": "cervene, zelene a modre"
        },
        "correctAnswer": "a"
      },
      {
        "id": 16,
        "question": "img/zlcz.jpg",
        "answers": {
          "a": "cervene, zelene a zlte",
          "b": "zlte, cervene a zelene",
          "c": "cervene, zlte a zelene"
        },
        "correctAnswer": "b"
      },
      {
        "id": 17,
        "question": "img/mzc.jpg",
        "answers": {
          "a": "cervene, zlte, zelene, modre",
          "b": "cervene, zelene, zlte, modre",
          "c": "cervene, modre, zlte, zelene",
        },
        "correctAnswer": "c"
      },
];

    var box = [
    {"name":"question1",
        "a": "11" ,
        "b": "12" ,
        "c": "13" ,
    },
    {"name":"question2",
        "a": "21" ,
        "b": "22" ,
        "c": "23" ,
    },
    {"name":"question3",
    "a": "31" ,
    "b": "32" ,
    "c": "33" ,
    },
    {"name":"question4",
    "a": "41" ,
    "b": "42" ,
    "c": "43" ,
    },
    {"name":"question5",
    "a": "51" ,
    "b": "52" ,
    "c": "53" ,
    },
    {"name":"question6",
    "a": "61" ,
    "b": "62" ,
    "c": "63" ,
    },
    {"name":"question7",
    "a": "71" ,
    "b": "72" ,
    "c": "73" ,
    }
                ]










$(function() {

    $("#whole_quesion").hide();
    $("#last").hide();
    $("#btn").click(function() {
        jQuery(function ($) {
            var fiveMinutes = 60 * 5,
                display = $('#time');
            startTimer(fiveMinutes, display);
        });
        $(function() {
            $("#whole_quesion").show();
            $("#btn").hide();

        })
    });
});

var id = [];
var ids = [0];


$(function() {
  $(".last").hide();
})

$("html, body").animate({ scrollTop: "0%" });





function name_display() {

      
    
  /*  var x = document.getElementById("question1");
    x.style.color = "blue"; */

    var name ;
    for (let i = 0; i < localStorage.length; i++) {
    
      const a = JSON.parse(localStorage.getItem(localStorage.key(i)));
          if(a.is == "true") {
            name = localStorage.key(i);
            document.getElementById("name").innerHTML = localStorage.key(i);
             if(a.day_of_exam != "false") {
              const oneDay = 24 * 60 * 60 * 1000; // hours*minutes*seconds*milliseconds
              const firstDate = new Date(a.day_of_exam);
              const secondDate = new Date();
            
              const diffDays = Math.round(Math.abs((firstDate - secondDate) / oneDay));
              if(diffDays + 1 == 0) {
                $(document).ready(function(){
                    $('#days_to_exam').text("dnes");
                    })    
                }  else if (diffDays + 1 < 0) {
                $(document).ready(function(){
                    $('#days_to_exam').text("uz je po");
                    })    
                } else {
                $(document).ready(function(){
                    $('#days_to_exam').text(diffDays + 1);
                    })    
            }
               
             }
          }    
              
      }
  
    var test_id = 0;
    const storage = JSON.parse(localStorage.getItem(name));
    for(var i = 0; i < 5; i++) {
      
        
        var random = questions[Math.floor(Math.random() * (questions.length - 8))];
      
        if (ids.includes(random.id)) {
         
          var tmp = random
            while (ids.includes(tmp.id)) {
              
              tmp = questions[Math.floor(Math.random() * (questions.length - 8))];
        
            }
            random = tmp
          
        }
       
  
        tmp = {"id": random.id, "correct" : random.correctAnswer}
        id.push(tmp);
        ids.push(random.id)
        document.getElementById(box[i].name).innerHTML = random.question;
        document.getElementById(box[i].a).innerHTML = random.answers.a;
        document.getElementById(box[i].b).innerHTML = random.answers.b;
        document.getElementById(box[i].c).innerHTML = random.answers.c;

        
       
    }
    
    test_id = Math.floor(Math.random() * (13 - 10)) + 10;

    var random = questions[test_id]
   
    tmp = {"id": random.id, "correct" : random.correctAnswer}
    id.push(tmp);

    
  
    document.getElementById(box[5].a).innerHTML = random.answers.a;
    document.getElementById(box[5].b).innerHTML =  random.answers.b;
    document.getElementById(box[5].c).innerHTML = random.answers.c;

    $(document).ready(function(){
      $('#obr').attr("src", random.question);
    })

    test_id = Math.floor(Math.random() * (16 - 14)) + 14;
    var random = questions[test_id]
   
    tmp = {"id": random.id, "correct" : random.correctAnswer}
    id.push(tmp);
    document.getElementById(box[6].a).innerHTML = random.answers.a;
    document.getElementById(box[6].b).innerHTML =  random.answers.b;
    document.getElementById(box[6].c).innerHTML = random.answers.c;

    $(document).ready(function(){
      $('#obrz').attr("src", random.question);
    })
    
    
  }

  counter = 0;
  correct = 0;
  intcorect = 0;

var question = [0,0,0,0,0,0,0]
var answers = ["f","f","f","f","f","f","f",]

var counter = 0;
function startTimer(duration, display) {
   
    var timer = duration, minutes, seconds;
    setInterval(function () {
        minutes = parseInt(timer / 60, 10);
        seconds = parseInt(timer % 60, 10);

        minutes = minutes < 10 ? "0" + minutes : minutes;
        seconds = seconds < 10 ? "0" + seconds : seconds;
        if(counter == 0) {
            display.text(minutes + ":" + seconds);
        }
        
        if (--timer < 0) {
            timer = duration;
        }

        $(document).ready(function(){
            $("#11").click(function() {
            document.getElementById("11").style.backgroundColor = "grey";
            document.getElementById("12").style.backgroundColor = "white";
            document.getElementById("13").style.backgroundColor = "white";
            answers[0] = "a"
            $(window).scrollTop($('#question2').position().top - 300); 
            });
            
            $("#12").click(function() {
                answers[0] = "b"
                document.getElementById("11").style.backgroundColor = "white";
                document.getElementById("12").style.backgroundColor = "grey";
                document.getElementById("13").style.backgroundColor = "white";
                $(window).scrollTop($('#question2').position().top - 300); 
                });
            
            $("#13").click(function() {
                    answers[0] = "c"
                    document.getElementById("11").style.backgroundColor = "white";
                    document.getElementById("12").style.backgroundColor = "white";
                    document.getElementById("13").style.backgroundColor = "grey";
                    $(window).scrollTop($('#question2').position().top - 300); 
                    });
        
                    
                       
            
           
$("#21").click(function() {
            document.getElementById("21").style.backgroundColor = "grey";
            document.getElementById("22").style.backgroundColor = "white";
            document.getElementById("23").style.backgroundColor = "white";
            answers[1] = "a"
            $(window).scrollTop($('#question3').position().top - 300); 
            
            
            });
            
            $("#22").click(function() {
                answers[1] = "b"
                document.getElementById("21").style.backgroundColor = "white";
                document.getElementById("22").style.backgroundColor = "grey";
                document.getElementById("23").style.backgroundColor = "white";
                $(window).scrollTop($('#question3').position().top - 300); 
                });
            
            $("#23").click(function() {
                    answers[1] = "c"
                    document.getElementById("21").style.backgroundColor = "white";
                    document.getElementById("22").style.backgroundColor = "white";
                    document.getElementById("23").style.backgroundColor = "grey";
                    $(window).scrollTop($('#question3').position().top - 300); 
                    });
$("#31").click(function() {
            document.getElementById("31").style.backgroundColor = "grey";
            document.getElementById("32").style.backgroundColor = "white";
            document.getElementById("33").style.backgroundColor = "white";
            answers[2] = "a"
          
                $(window).scrollTop($('#question4').position().top - 300); 

            
            });
            
            $("#32").click(function() {
                answers[0] = "b"
                document.getElementById("31").style.backgroundColor = "white";
                document.getElementById("32").style.backgroundColor = "grey";
                document.getElementById("33").style.backgroundColor = "white";
                $(window).scrollTop($('#question4').position().top - 300); 
                });
            
            $("#33").click(function() {
                    answers[2] = "c"
                    document.getElementById("31").style.backgroundColor = "white";
                    document.getElementById("32").style.backgroundColor = "white";
                    document.getElementById("33").style.backgroundColor = "grey";
                    $(window).scrollTop($('#question4').position().top - 300); 
                    });
$("#41").click(function() {
            document.getElementById("41").style.backgroundColor = "grey";
            document.getElementById("42").style.backgroundColor = "white";
            document.getElementById("43").style.backgroundColor = "white";
            answers[3] = "a"
            $(window).scrollTop($('#question5').position().top - 300); 
            });
            
            $("#42").click(function() {
                answers[3] = "b"
                document.getElementById("41").style.backgroundColor = "white";
                document.getElementById("42").style.backgroundColor = "grey";
                document.getElementById("43").style.backgroundColor = "white";
                $(window).scrollTop($('#question5').position().top - 300); 
                });
            
            $("#43").click(function() {
                    answers[3] = "c"
                    document.getElementById("41").style.backgroundColor = "white";
                    document.getElementById("42").style.backgroundColor = "white";
                    document.getElementById("43").style.backgroundColor = "grey";
                    $(window).scrollTop($('#question5').position().top - 300); 
                    });
$("#51").click(function() {
            document.getElementById("51").style.backgroundColor = "grey";
            document.getElementById("52").style.backgroundColor = "white";
            document.getElementById("53").style.backgroundColor = "white";
            answers[4] = "a"
            $(window).scrollTop($('#question6').position().top - 100); 
            });
            
            $("#52").click(function() {
                answers[4] = "b"
                document.getElementById("51").style.backgroundColor = "white";
                document.getElementById("52").style.backgroundColor = "grey";
                document.getElementById("53").style.backgroundColor = "white";
                $(window).scrollTop($('#question6').position().top - 100); 
                });
            
            $("#53").click(function() {
                    answers[4] = "c"
                    document.getElementById("51").style.backgroundColor = "white";
                    document.getElementById("52").style.backgroundColor = "white";
                    document.getElementById("53").style.backgroundColor = "grey";
                    $(window).scrollTop($('#question6').position().top - 100);  
                    });
$("#61").click(function() {
            document.getElementById("61").style.backgroundColor = "grey";
            document.getElementById("62").style.backgroundColor = "white";
            document.getElementById("63").style.backgroundColor = "white";
            answers[5] = "a"
            $(window).scrollTop($('#question7').position().top - 100); 
            });
            
            $("#62").click(function() {
                answers[5] = "b"
                document.getElementById("61").style.backgroundColor = "white";
                document.getElementById("62").style.backgroundColor = "grey";
                document.getElementById("63").style.backgroundColor = "white";
                $(window).scrollTop($('#question7').position().top - 100); 
                });
            
            $("63").click(function() {
                    answers[5] = "c"
                    document.getElementById("61").style.backgroundColor = "white";
                    document.getElementById("62").style.backgroundColor = "white";
                    document.getElementById("63").style.backgroundColor = "grey";
                    $(window).scrollTop($('#question7').position().top - 100); 
                    });
$("#71").click(function() {
                    answers[6] = "a"
                    document.getElementById("71").style.backgroundColor = "grey";
                    document.getElementById("72").style.backgroundColor = "white";
                    document.getElementById("73").style.backgroundColor = "white";
                    $(window).scrollTop($('#end_button').position().top - 100); 
                    });
$("#72").click(function() {
                    answers[6] = "b"
                    document.getElementById("71").style.backgroundColor = "white";
                    document.getElementById("72").style.backgroundColor = "grey";
                    document.getElementById("73").style.backgroundColor = "white";
                    $(window).scrollTop($('#end_button').position().top - 100); 
                    }); 
$("#73").click(function() {
                    answers[6] = "c"
                    document.getElementById("71").style.backgroundColor = "white";
                    document.getElementById("72").style.backgroundColor = "white";
                    document.getElementById("73").style.backgroundColor = "grey";
                    $(window).scrollTop($('#end_button').position().top - 100); 
                        
        
                 
                    });              

                    $("#end_button").click(function() {
                        if(counter == 0) {
                            is_end()
                            counter++
                            return
                        }
                        
                        
                        }); 
            
                    
            
        }) 

    if(minutes == "00" && seconds == "00") {
        
        if(counter == 0) {
            is_end()
            counter++
            return
        }
        
    }

    }, 1000);

}




  function is_end(){
   var correct = 0;
    for(let i = 0 ; i <= 6; i++) {
        var s = (i+1) * 10
        
        var x = answers[i]
        if (x == "a") {
            x = 1
        } else if (x == "b") {
            x = 2
        } else {
            x = 3
        }
       
           
            if(id[i].correct ==  answers[i]) {
          
               
             document.getElementById(s+x).style.backgroundColor = "green";
             if (i < 5) {
                correct++; 
             } else if (i = 6) {
                correct = correct+2; 
             } else {
                correct = correct+3; 
             }
            
            } else {
            
                
                

                if (answers[i] == "f") {
                
                
             
                    document.getElementById(s+1).style.backgroundColor = "red";
                  
                
                    document.getElementById(s+2).style.backgroundColor = "red";
               
               
                    document.getElementById(s+3).style.backgroundColor = "red";
                    
                
                
                } else {
                    document.getElementById(s+x).style.backgroundColor = "red";
                }

                var tmp = 0;
                if (id[i].correct == "a") {
                    tmp = 1
                  
                } else if (id[i].correct == "b") {
                    tmp = 2
               
                } else {
                    tmp = 3
                    
                } 
                document.getElementById(tmp+s).style.backgroundColor = "green";
            } 
  
            document.getElementById(s+1).disabled = true;
         
            document.getElementById(s+2).disabled = true;
       
            document.getElementById(s+3).disabled = true;
    

  }

  if (answers[6] == "f") {
                
                
             
    document.getElementById(71).style.backgroundColor = "red";
  

    document.getElementById(72).style.backgroundColor = "red";


    document.getElementById(73).style.backgroundColor = "red";
    


} else {
    document.getElementById(70+x).style.backgroundColor = "red";
}

var tmp = 0;
if (id[6].correct == "a") {
    tmp = 1
  
} else if (id[6].correct == "b") {
    tmp = 2

} else {
    tmp = 3
    
} 
document.getElementById(tmp+s).style.backgroundColor = "green";


document.getElementById(71).disabled = true;

document.getElementById(72).disabled = true;

document.getElementById(73).disabled = true;
  

  $(function() {

    $("#end").hide();
    $("#last").show();

    $(document).ready(function(){
        $('#succes').text(correct + " z 10 bodov ");
        if(correct < 7){
            $('#vys').text("neuspeli");
        } else {
            $('#vys').text("uspeli");
        }
      })
      
  
});


}


       
       
       





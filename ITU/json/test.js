
var questions = [ {
    "id": 1,
    "question": "Motorovým vozidlom sa rozumie",
    "answers": {
      "a": "koľajové a nekoľajové vozidlo poháňané vlastným motorom",
      "b": "nekoľajové vozidlo poháňané vlastným motorom s výnimkou mechanického alebo elektrického motorového vozíka pre zdravotne postihnuté osoby a trolejbus",
      "c": "vozidlo, ktoré má pridelené evidenčné číslo"
    },
    "correctAnswer": "b"
  },
  {
     "id": 2,
      "question": "Neohrozením sa rozumie povinnosť účastníka cestnej premávky",
      "answers": {
        "a": "neobchádzať ani nepredchádzať vozidlo prepravujúce nebezpečné veci a jazdiť za takýmto vozidlom vo vzdialenosti najmenej 50 m",
        "b": "počínať si tak, aby inému účastníkovi cestnej premávky nevzniklo nijaké nebezpečenstvo",
        "c": "počínať si tak, aby inému účastníkovi cestnej premávky nijako neprekážal"
      },
      "correctAnswer": "b"
    },
    {
      "id": 3,
      "question": "Vodič vozidla, ktoré je povinne vybavené prenosným výstražným trojuholníkom, je povinný tento trojuholník použiť počas",
      "answers": {
        "a": "prepravy nebezpečného nákladu",
        "b": "núdzového státia, ak také vozidlo tvorí prekážku cestnej premávky",
        "c": "núdzového státia vozidla za zníženej viditeľnosti"
      },
      "correctAnswer": "b"
    },
    {
        "id": 4,
        "question": "Vodič nesmie zastaviť a stáť vo vzdialenosti kratšej ako",
        "answers": {
          "a": "5 m od začiatku a 10 m od konca pozdĺžnej súvislej čiary alebo nástupného ostrovčeka",
          "b": "10 m od začiatku a 10 m od konca pozdĺžnej súvislej čiary alebo nástupného ostrovčeka",
          "c": "5 m od začiatku a 5 m od konca pozdĺžnej súvislej čiary alebo nástupného ostrovčeka tam, kde by medzi touto čiarou alebo nástupným ostrovčekom a vozidlom nezostal voľný aspoň jeden jazdný pruh široký najmenej 3 m"
        },
        "correctAnswer": "c"
      },
    {
      "id": 5,
      "question": "Predné svetlomety do hmly a zadné svietidlá do hmly vodič smie použiť",
      "answers": {
        "a": "len za hmly, sneženia alebo za dažďa",
        "b": "kedykoľvek za zníženej viditeľnosti",
        "c": "len za hmly; za sneženia a dažďa je povinný použiť diaľkové svetlomety"
      },
      "correctAnswer": "a"
    },
    {
        "id": 6,
        "question": "Vozovkou sa rozumie",
        "answers": {
          "a": "spevnená časť cesty určená predovšetkým na premávku motorových vozidiel,",
          "b": "časť cesty určená len na premávku nemotorových vozidiel",
          "c": "cesta, ktorá je určená na premávku motorových a nemotorových vozidiel, bicyklov, motoriek a mopedov."
        },
        "correctAnswer": "a"
      },
      {
        "id": 7,
        "question": " Motorové vozidlo musí mať počas jazdy rozsvietené",
        "answers": {
          "a": "svetlá vo vnútri vozidla",
          "b": "stretávacie svetlomety alebo im na roveň postavené osvetlenie",
          "c": "diaľkové svetlomety"
        },
        "correctAnswer": "b"
      },
      {
        "id": 8,
        "question": " Vodič nesmie viesť vozidlo",
        "answers": {
          "a": "po požití lieku v čase, keď liek môže znížiť jeho schopnosť viesť vozidlo; to neplatí, ak je jeho spolujazdcom lekár",
          "b": "po požití lieku v čase, keď liek môže znížiť jeho schopnosť viesť vozidlo",
          "c": "keď si zabudol vziať lieky, ktoré pravidelne užíva"
        },
        "correctAnswer": "b"
      },
      {
        "id": 9,
        "question": "Vodič nesmie pri predchádzaní ohroziť ani obmedziť vodičov vozidiel, pred ktoré sa po predídení zaraďuje; pritom je povinný dávať",
        "answers": {
          "a": "v obci zvukové alebo svetelné výstražné znamenie na upozornenie vodiča predchádzaného vozidla",
          "b": "znamenie o zmene smeru jazdy",
          "c": "znamenie o zmene smeru jazdy len za zníženej viditeľnosti"
        },
        "correctAnswer": "b"
      },
      {
        "id": 10,
        "question": "Znamenie o zmene smeru jazdy vodič je povinný dávať",
        "answers": {
          "a": "len pri zmene smeru jazdy; vodič, ktorý pri predchádzaní vybočuje zo smeru svojej jazdy, nie je povinný dávať znamenie o zmene smeru svojej jazdy",
          "b": "len pri predchádzaní iného vozidla",
          "c": "vždy aj pri zmene smeru jazdy alebo vybočovaní z neho alebo ak to vyžaduje bezpečnosť alebo plynulosť cestnej premávky"
        },
        "correctAnswer": "a"
      },
      {
        "id": 11,
        "question": "img/vlavo.png",
        "answers": {
          "a": "Zákruta vpravo",
          "b": "Zákruta vlavo",
          "c": "zakaz odbocenia"
        },
        "correctAnswer": "b"
      },
      {
        "id": 12,
        "question": "img/vpravo.png",
        "answers": {
          "a": "Zákruta vpravo",
          "b": "Zákruta vlavo",
          "c": "zakaz odbocenia"
        },
        "correctAnswer": "a"
      },
      {
        "id": 13,
        "question": "img/chodec.png",
        "answers": {
          "a": "prechod pre chodcov",
          "b": "muz na ceste",
          "c": "zena na ceste"
        },
        "correctAnswer": "a"
      },
      {
        "id": 14,
        "question": "img/hmla.png",
        "answers": {
          "a": "hmla",
          "b": "dazd",
          "c": "sneh"
        },
        "correctAnswer": "a"
      },
      {
        "id": 15,
        "question": "img/105.jpg",
        "answers": {
          "a": "modre, zelene a cervene",
          "b": "zelene, cervene a modre",
          "c": "cervene, zelene a modre"
        },
        "correctAnswer": "a"
      },
      {
        "id": 16,
        "question": "img/zlcz.jpg",
        "answers": {
          "a": "cervene, zelene a zlte",
          "b": "zlte, cervene a zelene",
          "c": "cervene, zlte a zelene"
        },
        "correctAnswer": "b"
      },
      {
        "id": 17,
        "question": "img/mzc.jpg",
        "answers": {
          "a": "cervene, zlte, zelene, modre",
          "b": "cervene, zelene, zlte, modre",
          "c": "cervene, modre, zlte, zelene",
        },
        "correctAnswer": "c"
      },
];

    var box = [
    {"name":"question1",
        "a": "11" ,
        "b": "12" ,
        "c": "13" ,
    },
    {"name":"question2",
        "a": "21" ,
        "b": "22" ,
        "c": "23" ,
    },
    {"name":"question3",
    "a": "31" ,
    "b": "32" ,
    "c": "33" ,
    },
    {"name":"question4",
    "a": "41" ,
    "b": "42" ,
    "c": "43" ,
    },
    {"name":"question5",
    "a": "51" ,
    "b": "52" ,
    "c": "53" ,
    },
    {"name":"question6",
    "a": "61" ,
    "b": "62" ,
    "c": "63" ,
    },
    {"name":"question7",
    "a": "71" ,
    "b": "72" ,
    "c": "73" ,
    }
                ]

var id = [];
var ids = [0];


$(function() {
  $(".last").hide();
})

$("html, body").animate({ scrollTop: "0%" });




function name_display() {

        for (let i = 0; i < localStorage.length; i++) {
          
          const a = JSON.parse(localStorage.getItem(localStorage.key(i)));
              if(a.is == "true") {
                document.getElementById("name").innerHTML = localStorage.key(i);
                
              }    
                  
          }
    
  /*  var x = document.getElementById("question1");
    x.style.color = "blue"; */

    var name ;
    for (let i = 0; i < localStorage.length; i++) {
    
      const a = JSON.parse(localStorage.getItem(localStorage.key(i)));
          if(a.is == "true") {
            name = localStorage.key(i);
            document.getElementById("name").innerHTML = localStorage.key(i);
             if(a.day_of_exam != "false") {
              const oneDay = 24 * 60 * 60 * 1000; // hours*minutes*seconds*milliseconds
              const firstDate = new Date(a.day_of_exam);
              const secondDate = new Date();
            
              const diffDays = Math.round(Math.abs((firstDate - secondDate) / oneDay));
              if(diffDays + 1 == 0) {
                $(document).ready(function(){
                    $('#days_to_exam').text("dnes");
                    })    
                }  else if (diffDays + 1 < 0) {
                $(document).ready(function(){
                    $('#days_to_exam').text("uz je po");
                    })    
                } else {
                $(document).ready(function(){
                    $('#days_to_exam').text(diffDays + 1);
                    })    
            }
               
             }
          }    
              
      }
  
    var test_id = 0;
    const storage = JSON.parse(localStorage.getItem(name));
    for(var i = 0; i < 5; i++) {
      
        
        var random = questions[Math.floor(Math.random() * (questions.length - 8))];
      
       
      
        if (storage.otazka[random.id -1].show == 'true') { 
         
          var x = 0
          var tmp = random
            while (storage.otazka[tmp.id -1].show == 'true' && x < 30) {
              
              tmp = questions[Math.floor(Math.random() * (questions.length - 8))];
              x++
            }
            random = tmp
          
        }


        if (ids.includes(random.id)) {
         
          var tmp = random
            while (ids.includes(tmp.id)) {
              
              tmp = questions[Math.floor(Math.random() * (questions.length - 8))];
        
            }
            random = tmp
          
        }
       
  
        tmp = {"id": random.id, "correct" : random.correctAnswer}
        id.push(tmp);
        ids.push(random.id)
        document.getElementById(box[i].name).innerHTML = random.question;
        document.getElementById(box[i].a).innerHTML = random.answers.a;
        document.getElementById(box[i].b).innerHTML = random.answers.b;
        document.getElementById(box[i].c).innerHTML = random.answers.c;

        
       
    }
    
    test_id = Math.floor(Math.random() * (13 - 10)) + 10;

    var random = questions[test_id]
   
    if (storage.otazka[random.id -1].show == 'true') { 
      
      var x = 0
      var tmp = random
        while (storage.otazka[tmo.id -1].show == 'true' || x < 30) {
          tmp = questions[Math.floor(Math.random() * (13 - 10)) + 10];
          x++
        }
        random = tmp
        
    }
    tmp = {"id": random.id, "correct" : random.correctAnswer}
    id.push(tmp);

    
  
    document.getElementById(box[5].a).innerHTML = random.answers.a;
    document.getElementById(box[5].b).innerHTML =  random.answers.b;
    document.getElementById(box[5].c).innerHTML = random.answers.c;

    $(document).ready(function(){
      $('#obr').attr("src", random.question);
    })

    test_id = Math.floor(Math.random() * (16 - 14)) + 14;
    var random = questions[test_id]
    if (storage.otazka[random.id -1].show == 'true') { 
      
      var x = 0
      var tmp = random
        while (storage.otazka[tmo.id -1].show == 'true' || x < 30) {
          tmp = questions[Math.floor(Math.random() * (16 - 14)) + 14];
          x++
        }
        random = tmp
        
    }

    tmp = {"id": random.id, "correct" : random.correctAnswer}
    id.push(tmp);
    document.getElementById(box[6].a).innerHTML = random.answers.a;
    document.getElementById(box[6].b).innerHTML =  random.answers.b;
    document.getElementById(box[6].c).innerHTML = random.answers.c;

    $(document).ready(function(){
      $('#obrz').attr("src", random.question);
    })
    
  }

  counter = 0;
  correct = 0;
  intcorect = 0;

var question = [0,0,0,0,0,0,0]
var bad= [0,0,0,0,0,0,0]

  function reply_click(clicked_id) {

        var x = clicked_id % 10;
        var q = document.getElementById(clicked_id);
        var good ;
        
        

        if (clicked_id < 20) {
           
           if(id[0].correct == "a"  && x == 1) {
            q.style.backgroundColor = "green"; 

            correct++; 
            bad[0] = 1;
           } else if (id[0].correct == "b"  && x == 2) {
            q.style.backgroundColor = "green"; 
            correct++; 
            bad[0] = 1;
           } else if (id[0].correct == "c"  && x == 3) {
            q.style.backgroundColor = "green"; 
            correct++; 
            bad[0] = 1;
            }  else { 
              if (id[0].correct == "a") {
                good = document.getElementById("11");
                good.style.backgroundColor = "green"; 
              } else if (id[0].correct == "b") {
                good = document.getElementById("12");
                good.style.backgroundColor = "green"; 
              } else {
                good = document.getElementById("13");
                good.style.backgroundColor = "green"; 
              }
              q.style.backgroundColor = "red"; 
              intcorect++; 
              question[0] = 1
            }
            document.getElementById("11").disabled = true;
            document.getElementById("12").disabled = true;
            document.getElementById("13").disabled = true;
            counter ++;
            $('html, body').animate({
              scrollTop: $("#question2").offset().top-300
          });

        } else if (clicked_id < 30 && clicked_id > 20) {
          
            if(id[1].correct == 'a'  && x == 1) {
              q.style.backgroundColor = "green";
              correct++; 
              bad[1] = 1; 
            } else if (id[1].correct == 'b'  && x == 2) {
              q.style.backgroundColor = "green"; 
              correct++; 
              bad[1] = 1;
            } else if (id[1].correct == 'c'  && x == 3) {
              q.style.backgroundColor = "green"; 
              correct++; 
              bad[1] = 1;
             }  else { 
              if (id[1].correct == "a") {
                good = document.getElementById("21");
                good.style.backgroundColor = "green"; 
              } else if (id[1].correct == "b") {
                good = document.getElementById("22");
                good.style.backgroundColor = "green"; 
              } else {
                good = document.getElementById("23");
                good.style.backgroundColor = "green"; 
              }
              intcorect++;
              q.style.backgroundColor = "red";  
              question[1] = 1
             }   

             document.getElementById("21").disabled = true;
            document.getElementById("22").disabled = true;
            document.getElementById("23").disabled = true;
            counter ++;
            $('html, body').animate({
              scrollTop: $("#question3").offset().top-300
          });
        } else if (clicked_id < 40 && clicked_id > 30) {
          
            if(id[2].correct == 'a'  && x == 1) {
              q.style.backgroundColor = "green"; 
              correct++; 
              bad[2] = 1;
            } else if (id[2].correct == 'b'  && x == 2) {
              q.style.backgroundColor = "green"; 
              correct++; 
              bad[2] = 1;
            } else if (id[2].correct == 'c'  && x == 3) {
              q.style.backgroundColor = "green"; 
              correct++; 
              bad[2] = 1;
             }  else { 
              if (id[2].correct == "a") {
                good = document.getElementById("31");
                good.style.backgroundColor = "green"; 
              } else if (id[2].correct == "b") {
                good = document.getElementById("32");
                good.style.backgroundColor = "green"; 
              } else {
                good = document.getElementById("33");
                good.style.backgroundColor = "green"; 
              }
              q.style.backgroundColor = "red";  
              intcorect++;
              question[2] = 1
             }  
             
             document.getElementById("31").disabled = true;
            document.getElementById("32").disabled = true;
            document.getElementById("33").disabled = true;
            counter ++;
            $('html, body').animate({
              scrollTop: $("#question4").offset().top-300
          });

        } else if (clicked_id < 50 && clicked_id > 40) {
            
            if(id[3].correct == 'a'  && x == 1) {
              q.style.backgroundColor = "green"; 
              correct++; 
              bad[3] = 1;
            } else if (id[3].correct == 'b'  && x == 2) {
              q.style.backgroundColor = "green"; 
              correct++; 
              bad[3] = 1;
            } else if (id[3].correct == 'c'  && x == 3) {
              q.style.backgroundColor = "green"; 
              correct++; 
              bad[3] = 1;
             }  else { 
              if (id[3].correct == "a") {
                good = document.getElementById("41");
                good.style.backgroundColor = "green"; 
              } else if (id[3].correct == "b") {
                good = document.getElementById("42");
                good.style.backgroundColor = "green"; 
              } else {
                good = document.getElementById("43");
                good.style.backgroundColor = "green"; 
              }
              q.style.backgroundColor = "red"; 
              intcorect++; 
              question[3] = 1
              
             }
             
             document.getElementById("41").disabled = true;
            document.getElementById("42").disabled = true;
            document.getElementById("43").disabled = true;
            counter++;
            $('html, body').animate({
              scrollTop: $("#question5").offset().top-300
          });
        } else if (clicked_id < 60 && clicked_id > 50) {

            if(id[4].correct == 'a'  && x == 1) {
              q.style.backgroundColor = "green"; 
              correct++; 
              bad[4] = 1;
            } else if (id[4].correct == 'b'  && x == 2) {
              q.style.backgroundColor = "green";
              correct++; 
              bad[4] = 1; 
            } else if (id[4].correct == 'c'  && x == 3) {
              q.style.backgroundColor = "green"; 
              correct++;
              bad[4] = 1; 
             }  else { 
              if (id[4].correct == "a") {
                good = document.getElementById("51");
                good.style.backgroundColor = "green"; 
              } else if (id[4].correct == "b") {
                good = document.getElementById("52");
                good.style.backgroundColor = "green"; 
              } else {
                good = document.getElementById("53");
                good.style.backgroundColor = "green"; 
              }
                q.style.backgroundColor = "red"; 
                intcorect++; 
                question[4] = 1
             } 
             counter++;
             document.getElementById("51").disabled = true;
            document.getElementById("52").disabled = true;
            document.getElementById("53").disabled = true;
            $('html, body').animate({
              scrollTop: $("#question6").offset().top-100
          });

        } else if (clicked_id < 70 && clicked_id > 60) {

          if(id[5].correct == 'a'  && x == 1) {
            q.style.backgroundColor = "green"; 
            correct++; 
            bad[5] = 1;
          } else if (id[5].correct == 'b'  && x == 2) {
            q.style.backgroundColor = "green";
            correct++;  
            bad[5] = 1;
          } else if (id[5].correct == 'c'  && x == 3) {
            q.style.backgroundColor = "green"; 
            correct++; 
            bad[5] = 1;
           }  else { 
            if (id[5].correct == "a") {
              good = document.getElementById("61");
              good.style.backgroundColor = "green"; 
            } else if (id[5].correct == "b") {
              good = document.getElementById("62");
              good.style.backgroundColor = "green"; 
            } else {
              good = document.getElementById("63");
              good.style.backgroundColor = "green"; 
            }
              q.style.backgroundColor = "red"; 
              intcorect++;
              question[5] = 1
           } 
           counter++;
           document.getElementById("61").disabled = true;
          document.getElementById("62").disabled = true;
          document.getElementById("63").disabled = true;
          $('html, body').animate({
            scrollTop: $("#question7").offset().top-100
        });

      } else if (clicked_id < 80 && clicked_id > 70) {

        if(id[6].correct == 'a'  && x == 1) {
          q.style.backgroundColor = "green"; 
          correct++; 
          bad[6] = 1;
        } else if (id[6].correct == 'b'  && x == 2) {
          q.style.backgroundColor = "green";
          correct++;  
          bad[6] = 1;
        } else if (id[6].correct == 'c'  && x == 3) {
          q.style.backgroundColor = "green"; 
          correct++; 
          bad[6] = 1;
         }  else { 
          if (id[6].correct == "a") {
            good = document.getElementById("71");
            good.style.backgroundColor = "green"; 
          } else if (id[6].correct == "b") {
            good = document.getElementById("72");
            good.style.backgroundColor = "green"; 
          } else {
            good = document.getElementById("73");
            good.style.backgroundColor = "green"; 
          }
            q.style.backgroundColor = "red"; 
            intcorect++; 
            question[6] = 1
         } 
         counter++;
         document.getElementById("71").disabled = true;
        document.getElementById("72").disabled = true;
        document.getElementById("73").disabled = true;
        $("html, body").animate({ scrollTop: "4000%" });
    } 

    if(counter == 7) {
      is_end()
    }
      
            
        }


  function is_end(){

    for (let i = 0; i < localStorage.length; i++) {
    
      const a = JSON.parse(localStorage.getItem(localStorage.key(i)));

          if(a.is == "true") {

            for (let i = 0 ; i < 7; i++) {
              
              a.otazka[id[i].id ].bad  =  a.otazka[id[i].id ].bad + question[i]
              a.otazka[id[i].id ].good  =  a.otazka[id[i].id].good + bad[i]
            }
            
           
            myjs = JSON.stringify(a);
            localStorage.setItem(localStorage.key(i),myjs); 
          }    
              
      }

    if(counter == 7) {
      quest = correct/7 * 100
      quest = quest.toFixed(2)
     $(document).ready(function(){
       $('#succes').text(quest + "%");
     })

      $(function() {
        
        $(".x").hide();
        $(".last").show();
      })
      
    }
  }   

